---
all:
  children:
    control_plane:
      hosts:
        k8s:
          ansible_host: k8s.shion1305.com
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/credentials/shion1305-oci
          local_ip: 10.0.0.20
          wireguard_ip: 10.0.0.20
          architecture: arm64
          wireguard_interface: wg0
          wireguard_port: 51820
          cni_version: v1.3.0

    workers:
      hosts:
        cm4:
          ansible_host: cm4
          ansible_user: shion
          ansible_ssh_private_key_file: ~/.ssh/credentials/rasp-cm4
          local_ip: 192.168.11.7
          wireguard_ip: 10.0.0.3
          architecture: arm64
          wireguard_interface: wg0
          cni_version: v1.3.0
          has_ufw: true

        s2204:
          ansible_host: s2204
          ansible_user: shion
          ansible_ssh_private_key_file: ~/.ssh/credentials/shion1305
          local_ip: 192.168.11.2
          wireguard_ip: 10.0.0.4
          architecture: amd64
          wireguard_interface: wg0
          cni_version: v1.3.0
          has_ufw: true

        k8s-proxy:
          ansible_host: prox
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/credentials/shion1305-oci
          local_ip: 10.0.0.21
          wireguard_ip: 10.0.0.21
          architecture: arm64
          wireguard_interface: wg0
          cni_version: v1.3.0
          has_ufw: true

  vars:
    # Kubernetes configuration
    kubernetes_version: "1.34.3-1.1"
    pod_network_cidr: "10.244.0.0/16"
    service_cidr: "10.96.0.0/12"

    # WireGuard network
    wireguard_network: "10.0.0.0/24"

    # Static WireGuard peers (non-Kubernetes nodes)
    wireguard_static_peers:
      mac-m4-max:
        public_key: "nP4kEiL1SQHb3emQlqit43UzroOYa+PZGtsBxJQbaFM="
        allowed_ips: "10.0.0.129/32"

    # Control plane endpoint
    control_plane_endpoint: "k8s.shion1305.com:6443"
    apiserver_advertise_address: "10.0.0.20"

    # Container runtime
    containerd_version: "1.7.27-*"
